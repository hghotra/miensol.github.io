{"componentChunkName":"component---src-templates-post-template-tsx","path":"/google-play-services-is-no-longer-a-monolith/","result":{"data":{"markdownRemark":{"id":"8088f884-97f9-5501-8930-97b8015abd03","html":"<p>Nowadays it’s getting harder and harder to build a meaningful app and not rely on <a href=\"https://developer.android.com/google/play-services/index.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Google Play Services</a> to aid us in some commonly required features such as <a href=\"http://developer.android.com/google/play-services/maps.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">maps</a>, better <a href=\"https://developer.android.com/google/play-services/location.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">location provider</a>, <a href=\"http://developer.android.com/training/location/geofencing.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">geo fencing</a> and so much more. Unfortunately up until now the library shipped as a giant monolith ripping us from <a href=\"http://jakewharton.com/play-services-is-a-monolith/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">one third of dex method limit</a>. For curious reader here’s are method counts in couple of versions:</p>\n<table>\n<thead>\n<tr>\n<th align=\"right\">Version</th>\n<th align=\"right\">Method Count</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"right\">3.2.65</td>\n<td align=\"right\">6330</td>\n</tr>\n<tr>\n<td align=\"right\">4.4.52</td>\n<td align=\"right\">16933</td>\n</tr>\n<tr>\n<td align=\"right\">5.0.89</td>\n<td align=\"right\">20312</td>\n</tr>\n<tr>\n<td align=\"right\">6.1.71</td>\n<td align=\"right\">23641</td>\n</tr>\n</tbody>\n</table>\n<p>and <a href=\"https://gist.github.com/miensol/c6ac03fa4f6f52441992\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">a full breakdown</a>.</p>\n<h2 id=\"google-play-services-65-granular-dependency-management\" style=\"position:relative;\"><a href=\"#google-play-services-65-granular-dependency-management\" aria-label=\"google play services 65 granular dependency management permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Google Play Services 6.5 granular dependency management</h2>\n<p>Today Google has made the awaited, more than usual, version of their <a href=\"https://developer.android.com/google/play-services/index.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">SDK available</a>. With the update apart from new features you can finally depend only on a subset of enormous API. Here’s a table from documentation along with <a href=\"https://github.com/mihaip/dex-method-counts\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">dex method counts</a>:</p>\n<table>\n<thead>\n<tr>\n<th>API Name</th>\n<th align=\"center\">Gradle depdenency</th>\n<th align=\"right\">Dex method count</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Google Play Services</td>\n<td align=\"center\">com.google.android.gms:play-services:6.5.87</td>\n<td align=\"right\">24525</td>\n</tr>\n<tr>\n<td>Google+</td>\n<td align=\"center\">com.google.android.gms:play-services-plus:6.5.87</td>\n<td align=\"right\">1525</td>\n</tr>\n<tr>\n<td>Google Account Login</td>\n<td align=\"center\">com.google.android.gms:play-services-identity:6.5.87</td>\n<td align=\"right\">181</td>\n</tr>\n<tr>\n<td>Google Activity Recognition</td>\n<td align=\"center\">com.google.android.gms:play-services-location:6.5.87</td>\n<td align=\"right\">857</td>\n</tr>\n<tr>\n<td>Google App Indexing</td>\n<td align=\"center\">com.google.android.gms:play-services-appindexing:6.5.87</td>\n<td align=\"right\">482</td>\n</tr>\n<tr>\n<td>Google Cast</td>\n<td align=\"center\">com.google.android.gms:play-services-cast:6.5.87</td>\n<td align=\"right\">976</td>\n</tr>\n<tr>\n<td>Google Drive</td>\n<td align=\"center\">com.google.android.gms:play-services-drive:6.5.87</td>\n<td align=\"right\">2328</td>\n</tr>\n<tr>\n<td>Google Fit</td>\n<td align=\"center\">com.google.android.gms:play-services-fitness:6.5.87</td>\n<td align=\"right\">1895</td>\n</tr>\n<tr>\n<td>Google Maps</td>\n<td align=\"center\">com.google.android.gms:play-services-maps:6.5.87</td>\n<td align=\"right\">2568</td>\n</tr>\n<tr>\n<td>Google Mobile Ads</td>\n<td align=\"center\">com.google.android.gms:play-services-ads:6.5.87</td>\n<td align=\"right\">3278</td>\n</tr>\n<tr>\n<td>Google Panorama Viewer</td>\n<td align=\"center\">com.google.android.gms:play-services-panorama:6.5.87</td>\n<td align=\"right\">94</td>\n</tr>\n<tr>\n<td>Google Play Game services</td>\n<td align=\"center\">com.google.android.gms:play-services-games:6.5.87</td>\n<td align=\"right\">5046</td>\n</tr>\n<tr>\n<td>Google Wallet</td>\n<td align=\"center\">com.google.android.gms:play-services-wallet:6.5.87</td>\n<td align=\"right\">1116</td>\n</tr>\n<tr>\n<td>Android Wear</td>\n<td align=\"center\">com.google.android.gms:play-services-wearable:6.5.87</td>\n<td align=\"right\">1187</td>\n</tr>\n<tr>\n<td>Google Actions<br /> Google Analytics <br /> Google Cloud Messaging</td>\n<td align=\"center\">com.google.android.gms:play-services-base:6.5.87</td>\n<td align=\"right\">5212</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"a-small-change-to-improve-build-time\" style=\"position:relative;\"><a href=\"#a-small-change-to-improve-build-time\" aria-label=\"a small change to improve build time permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>A small change to improve build time</h2>\n<p>For me the biggest win is that in one of the apps we are actively developing granular dependency declaration means with a simple change from</p>\n<div class=\"gatsby-highlight\" data-language=\"groovy\"><pre class=\"language-groovy\"><code class=\"language-groovy\">compile <span class=\"token string\">'com.google.android.gms:play-services:6.1.71'</span></code></pre></div>\n<p>to</p>\n<div class=\"gatsby-highlight\" data-language=\"groovy\"><pre class=\"language-groovy\"><code class=\"language-groovy\">compile <span class=\"token string\">'com.google.android.gms:play-services-maps:6.5.87'</span>\ncompile <span class=\"token string\">'com.google.android.gms:play-services-location:6.5.87'</span>\ncompile <span class=\"token string\">'com.google.android.gms:play-services-base:6.5.87'</span></code></pre></div>\n<p> I no longer have to run <a href=\"http://proguard.sourceforge.net/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Proguard</a> during development. No wonder my build time just improved by 15 seconds.</p>\n<p><em>This article is cross-posted with <a href=\"http://blog.brightinventions.pl\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">my company blog</a></em></p>","fields":{"slug":"/google-play-services-is-no-longer-a-monolith/","tagSlugs":["/tag/android/"]},"excerpt":"Nowadays it’s getting harder and harder to build a meaningful app and not rely on Google Play Services to aid us in some commonly required features such as maps, better location provider, geo fencing and so much more. Unfortunately up until now the library shipped as a giant monolith ripping us from one third of dex…","frontmatter":{"date":"2014-12-09T10:00:00.000Z","description":null,"tags":["android"],"title":"Google Play Services is no longer a giant monolith","socialImage":null}}},"pageContext":{"slug":"/google-play-services-is-no-longer-a-monolith/"}}}