{"componentChunkName":"component---src-templates-post-template-tsx","path":"/typescript-tips-from-kotlin-developer-const/","result":{"data":{"markdownRemark":{"id":"97ee850d-7eea-527b-bf62-2b4371f78b93","html":"<p>Nowadays I mostly code in <a href=\"https://kotlinlang.org/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Kotlin programming language</a>. I got interested in it when I started working on a Java 7 codebase and quickly got fed up with the language. At <a href=\"https://brightinventions.pl\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Bright Inventions</a> we often use TypeScript for both back-end, front-end and mobile development so I thought I would share some thoughts and tips for TypeScript learned while using Kotlin. In particular this post is about constant variables.</p>\n<h2 id=\"use-const-whenever-possible\" style=\"position:relative;\"><a href=\"#use-const-whenever-possible\" aria-label=\"use const whenever possible permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Use <code class=\"language-text\">const</code> whenever possible</h2>\n<p><a href=\"https://hackernoon.com/5-benefits-of-immutable-objects-worth-considering-for-your-next-project-f98e7e85b6ac\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Using immutable variables</a> aids reasoning about the flow and state of a program. It helps compiler to provide more intelligent hints especially while dealing with nullable types.</p>\n<p>In Kotlin a <code class=\"language-text\">val</code> keyword denotes a variable which value does not change after initialization e.g.:</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token keyword\">val</span> x<span class=\"token operator\">:</span> Int\n<span class=\"token keyword\">val</span> y <span class=\"token operator\">=</span> <span class=\"token number\">3</span>\nx <span class=\"token operator\">=</span> <span class=\"token number\">2</span>\nx <span class=\"token operator\">=</span> <span class=\"token number\">20</span> <span class=\"token comment\">// Error: Val cannot be reassigned</span>\ny <span class=\"token operator\">=</span> <span class=\"token number\">30</span> <span class=\"token comment\">// Error: Val cannot be reassigned</span></code></pre></div>\n<p>In <a href=\"https://www.typescriptlang.org/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">TypeScript</a> such a situation is handled with <code class=\"language-text\">const</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">const</span> x<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span> <span class=\"token comment\">// Error: 'const' declarations must be initialized</span>\n<span class=\"token keyword\">const</span> y<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span> <span class=\"token operator\">=</span> <span class=\"token number\">3</span>\n\ny <span class=\"token operator\">=</span> <span class=\"token number\">30</span> <span class=\"token comment\">// Error: Cannot assign to 'y' because it is constant or read-only property</span></code></pre></div>\n<h2 id=\"compilers-love-const\" style=\"position:relative;\"><a href=\"#compilers-love-const\" aria-label=\"compilers love const permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Compilers love <code class=\"language-text\">const</code></h2>\n<p>The first way in which the compiler gets smarter when we use <code class=\"language-text\">const</code> are null checks. When you enable <a href=\"https://www.typescriptlang.org/docs/handbook/compiler-options.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><code class=\"language-text\">strictNullChecks</code></a>, which you should, both Kotlin and TypeScript compiler understand if something can or cannot be null.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">const</span> firstName<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token operator\">|</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">=</span> <span class=\"token function\">getFirstName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">let</span> lastName<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token operator\">|</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">=</span> <span class=\"token function\">getLastName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>firstName <span class=\"token operator\">!==</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">&amp;&amp;</span> lastName <span class=\"token operator\">!==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>firstName<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span>\n        <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>lastName<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span> <span class=\"token comment\">// Error: Object is possibly 'null'</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>In the first 2 lines we declare <code class=\"language-text\">firstName</code> and <code class=\"language-text\">lastName</code> as holding <code class=\"language-text\">string</code> or <code class=\"language-text\">null</code>. The variables are initialized with the helper functions <code class=\"language-text\">getFirstName</code> and <code class=\"language-text\">getLastName</code>. After we check that <code class=\"language-text\">firstName</code> and <code class=\"language-text\">lastName</code> are <strong>definitely not null</strong> we fire some async function. We can safely use <code class=\"language-text\">firstName.length</code>. However, when we use <code class=\"language-text\">lastName.length</code> the compiler complains with <code class=\"language-text\">Object is possibly &#39;null&#39;</code> error. This is because it is possible that in between the null check and the <code class=\"language-text\">console.log</code> statement <em>something</em> could change the <code class=\"language-text\">lastName</code> value. We might know that this is not true just by looking at the code. The compiler however, cannot be 100% sure in all cases. Thankfully we have <code class=\"language-text\">const</code> and we can share our knowledge with the compiler.</p>\n<h2 id=\"compilers-catch-bugs-with-const\" style=\"position:relative;\"><a href=\"#compilers-catch-bugs-with-const\" aria-label=\"compilers catch bugs with const permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Compilers catch bugs with <code class=\"language-text\">const</code></h2>\n<p>Because <code class=\"language-text\">const</code> and <code class=\"language-text\">val</code> can only be assigned once, compilers can prevent another class of bugs. Take a look at the code example blow. There is a bug üêõ that could easily be avoided had we used <code class=\"language-text\">const</code> instead of <code class=\"language-text\">let</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">let</span> firstName<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token operator\">=</span> person<span class=\"token punctuation\">.</span>firstName\n<span class=\"token keyword\">let</span> lastName<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token operator\">=</span> person<span class=\"token punctuation\">.</span>lastName\n\n<span class=\"token keyword\">const</span> parsed <span class=\"token operator\">=</span> <span class=\"token function\">parseFormData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">data<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>name<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> first<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token operator\">|</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> last<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token operator\">|</span> <span class=\"token keyword\">null</span>\n    <span class=\"token keyword\">let</span> parts <span class=\"token operator\">=</span> data<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">' '</span><span class=\"token punctuation\">)</span>\n    lastName <span class=\"token operator\">=</span> parts<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span>\n    firstName <span class=\"token operator\">=</span> parts<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> firstName<span class=\"token operator\">:</span> first<span class=\"token punctuation\">,</span> lastName<span class=\"token operator\">:</span> last <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>parsed<span class=\"token punctuation\">.</span>firstName <span class=\"token operator\">!==</span> firstName <span class=\"token operator\">||</span> parsed<span class=\"token punctuation\">.</span>lastName <span class=\"token operator\">!==</span> lastName<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> \n    <span class=\"token comment\">// submit changes</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>You may have spotted the bug. Chances are though, especially if you are like me, that after long hours when the coffee level in your blood drops substantially below the required level, it will take long minutes to figure out the cause. There is a very easy remedy though. With <code class=\"language-text\">firstName</code> and <code class=\"language-text\">lastName</code> declared as constant variables the compiler catches bugs for us:</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\">lastName <span class=\"token operator\">=</span> parts<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token comment\">// Error: Cannot assign 'lastName' because it is a constant or a read-only property</span>\nfirstName <span class=\"token operator\">=</span> parts<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token comment\">// Error: Cannot assign 'firstName' because it is a constant or a read-only property</span></code></pre></div>","fields":{"slug":"/typescript-tips-from-kotlin-developer-const/","tagSlugs":["/tag/type-script/","/tag/kotlin/","/tag/const/","/tag/immutability/"]},"excerpt":"Nowadays I mostly code in Kotlin programming language. I got interested in it when I started working on a Java 7 codebase and quickly got fed up with the language. At Bright Inventions we often use TypeScript for both back-end, front-end and mobile development so I thought I would share some thoughts and tips for‚Ä¶","frontmatter":{"date":"2018-04-11T00:00:00.000Z","description":null,"tags":["TypeScript","Kotlin","const","immutability"],"title":"TypeScript tips from Kotlin developer - const","socialImage":{"childImageSharp":{"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsSAAALEgHS3X78AAAEp0lEQVQ4y33Ua0xTZxgH8CNzEaIzcSwaFzVTF+PmpizDsEwT52Kcy8ziJZvivKGuYaClpXeEjnJK6alQBFsgQDRmN+0S3SVZZF/0wzKTzcwYWgqnpS2l5TYMchFLj+f899DaosuykzznPV/eX/5P3vM+zEt2b91aW3cwz+y7t8vod+cbAu4v1CG3XhF2V8kDbn3xmNupvume4pa4Y9wC9yNrVqJi3OyamVrvUg3ELqyyMfMveK5ltw5hvc2Pd2tC2G0K40h5FApdP/TKMdRrujDKbQTqMiDWLoRUm/VMzXCZgDMLsfPLbwl3mjIZxum+ktEWxIv13vg6rkfMY33ibiMvfqqPiGqdR4yYc0XRmiE+tL4gxrhMkdJRZdJ3Yo2hgbCG5TeY9OPwuJj2EDIcHoFQrOe8eJsNYu+XXehid0CoXoSJ6qWYrlmMR9aFEqFUWfSdGUdjAusAkKBirW9mzCZMgIzTIzzv6MTi+h68bvPid3Y/BNNSjLGvYMq8DA8t2RKhEqGIpbGX/4UlErqfJOwUGGcX5ju68DN7AvGKtfi7cgPGTWswwa6QJs3LJEJnk8bRQGjjijQ207YxgcWca+nt9LjmtQdBrQtMUze+YhWYMeRgqCIP940bMVa5XiJUmmBXgtA46rPx6PzquWRtOUnMsZqJ3ypnGEqWbLmJF5qrKjGt2YaIYQdGzm7BaHmuRKhEKB6Y1sRRuwpT9teewjYnseZ1jDCLpVu+GIW9slaYUHyMkGYfBnS7MGR4HyNlhFbkUtJNArg3MH4utyN1ltOtW560Sdht29whMy0+V6X1OzwoPiL0Ko8jrDqAiGZPCpWGy7Y+jlW9hUku73pqC9qTbU47c5j47Trmmadd3+IaKSmD77RcCJTIEFIcTaMR3UfSuCH38Z9GFkbl6NepPaUlmDe7WjQRxlkz+CwYPFXpCp+pRk+RRvCfliMgJ1R5FCFVPkY1O3FTb4JGMfjYop0Cq+j7PrWvRhtJpLSoI0xb3dAceO+U3RUqrkN3YYXAF2kwi/rlhRhWfIIbWk4qUkelUmUYBkUobtFOokrZ70rt5fRJ1KqLMJcujDwBC5yuQGETPDKL4C00wlukQ7RYhh81jThs6MfnmpAkVwWhUvZJNDASKFs6h9oM0TR62THMMHePXXT5ZZfQedIudMpqEJbpcFXdht3GPhwwBHFcF4CM0DOq0FPoBMylkTRaW55Ez52NMsydw9+6ek5ewV8FzUKggMNl1TfYSnd5p7EXe8v9OFgWwDFd8D/QSVSr5lC7cSB59f44dN3VeeIn+D5rE1qU17HB6sdm1oftJh8+IHRPee//oBOoVs+hDSZCfzvYcbUv/xfUKzriy+28+CqNsBwLjTGzT9xm8os0dEVCRUJFQkVCRUJFQkVCZyzacdDvczV9yu59v147r+/Ec808ljT6saq+F+vqAthkC+IdGrjbzX34sCpM46wfhyoiKDgbQaE+ihLtALTqQTr9ftgMMdBv9ANdyXlMmfp2wwKHZ4CGRPeiBg+fbffyK2u7eRq2/CYLz9PA5d8z+XlKylNSnpLylJSnpDwl9VFSXl8S7jLK++/TibP/ADshc32Gh+DDAAAAAElFTkSuQmCC","aspectRatio":1.0066225165562914,"src":"/static/100c0a289713fc0b1b8b98cabe2f94be/5d6a1/kotlin-logo.png","srcSet":"/static/100c0a289713fc0b1b8b98cabe2f94be/5d6a1/kotlin-logo.png 152w","sizes":"(max-width: 152px) 100vw, 152px"}}}}}},"pageContext":{"slug":"/typescript-tips-from-kotlin-developer-const/"}}}